package com.java.servlets;
import java.io.IOException;



import java.net.MalformedURLException;
import java.util.ArrayList;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.google.gdata.util.AuthenticationException;


import com.google.gdata.util.ServiceException;


//import com.google.gdata.util.AuthenticationException;
import Applic.Youtube;

public class Connexion  extends HttpServlet{
	public Youtube youtube;
	public ArrayList<String> playlists = new ArrayList<String>();
 public void doGet( HttpServletRequest request,
HttpServletResponse response ) throws ServletException, IOException
{
 String actionPath = request.getServletPath();  
 String login = request.getParameter( "loginClient" );
 String password = request.getParameter( "passClient" );
 String message = "";
 System.out.println(actionPath);
 if(actionPath.equals("/Connexion")){  
     //code to process this url  
	try {
		youtube = new Youtube(login,password);
		message = "Choisir la playlist que vous voulez importer";
		request.setAttribute( "message", message );

		this.getServletContext().getRequestDispatcher("/WEB-INF/Connexion.jsp" ).forward( request, response );
		request.setAttribute("client",login);
		//this.getServletContext().getRequestDispatcher("/result.jsp" ).forward( request, response );
	} catch (AuthenticationException e) {
		message = "Erreur d'authentification!";
		request.setAttribute( "message", message );
		this.getServletContext().getRequestDispatcher("/WEB-INF/Test.jsp" ).forward( request, response );
		e.printStackTrace();
		}
 	}
 	else if(actionPath.equals("/Compute")){  
 
 		request.setAttribute( "message", "on est dans connexion!" );
		this.getServletContext().getRequestDispatcher("/compute.jsp" ).forward( request, response );
 	}  
	}
 }

/*<iframe id="ytplayer" type="text/html" width="640" height="390"
  src="http://www.youtube.com/embed?listType=playlist&index=1&list=PLFvcoOkuf1jeHXYZorZA0d4qSY3Hj3Zig;autoplay=1"
  frameborder="0"/>*/

